// components/OnboardingSidebar.tsx
import React, { useState } from "react";
import styles from "../styles/OnboardingSidebar.module.css";

interface Step {
    title: string;
    description: string;
    optional?: boolean;
}

export const OnboardingSidebar = () => {
    const [open, setOpen] = useState(false);
    const [activeSection, setActiveSection] = useState<number>(0);

    const sections = [
        {
            title: "üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç",
            content: "–ï—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ –Ω—É–∂–Ω—É—é –º–∞—Ä–∫—É –û–ö–õ, –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –µ—ë –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É '+ –î–æ–±–∞–≤–∏—Ç—å –û–ö–õ', –ø–æ—Å–ª–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –∫–∞–±–µ–ª—è –≤ –û–ö–õ. " +
                "–ï—Å–ª–∏ –Ω–µ—Ç - —Å–ª–µ–¥—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∏–∂–µ."
        },
        {
            title: "üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
            steps: [
                {
                    title: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–∞–±–µ–ª–µ–Ω–µ—Å—É—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞",
                    description: "–û—Ç–∫—Ä–æ–π—Ç–µ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç (–≥–ª–∞–¥–∫–∞—è —Ç—Ä—É–±–∞, –≥–æ—Ñ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä—É–±–∞, –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–π –∫–∞–±–µ–ª—å-–∫–∞–Ω–∞–ª –∏ —Ç.–¥.)"
                },
                {
                    title: "–ó–∞–¥–∞–π—Ç–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –º–æ–Ω—Ç–∞–∂–∞",
                    description: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–∞–±–µ–ª–µ–Ω–µ—Å—É—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞."
                },
                {
                    title: "–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–µ–ø—ë–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç",
                    description: "–ü–æ–¥—Ö–æ–¥—è—â–∏–π –∫—Ä–µ–ø—ë–∂ —Ç–∞–∫–∂–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≤—ã–±–æ—Ä–∞."
                },
                {
                    title: "–í—ã–±–µ—Ä–∏—Ç–µ –û–ö–õ",
                    description: "–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –æ–≥–Ω–µ—Å—Ç–æ–π–∫—É—é –∫–∞–±–µ–ª—å–Ω—É—é –ª–∏–Ω–∏—é –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤."
                },
                {
                    title: "–î–æ–±–∞–≤—å—Ç–µ –û–ö–õ",
                    description: "–£–∫–∞–∂–∏—Ç–µ –¥–ª–∏–Ω—É –≤ –º–µ—Ç—Ä–∞—Ö –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É '+ –î–æ–±–∞–≤–∏—Ç—å –û–ö–õ'"
                },
                {
                    title: "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–±–µ–ª—è",
                    description: "–ú–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–º, –≤—ã–±—Ä–∞–≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–±–µ–ª—è, –∞ –º–æ–∂–µ—Ç–µ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É"
                },
                {
                    title: "–î–æ–±–∞–≤—å—Ç–µ –∫–∞–±–µ–ª—å –≤ –û–ö–õ",
                    description: "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–±–µ–ª—å –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ñ–∏–ª—å—Ç—Ä, –∏–ª–∏ –∂–µ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ–π—Å—å –ø–æ–∏—Å–∫–æ–º. –í–≤–µ–¥—è –≤ —Å—Ç—Ä–æ–∫—É –∏–∑–≤–µ—Å—Ç–Ω—É—é –≤–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (—Å–µ—á–µ–Ω–∏–µ –∫–∞–±–µ–ª—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∏–ª –∏ —Ç.–¥.), –≤—ã –º–æ–∂–µ—Ç–µ —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–±–æ—Ä –Ω—É–∂–Ω–æ–π –º–∞—Ä–∫–∏. " +
                        "–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–∞–±–µ–ª—è, —É–∫–∞–∂–∏—Ç–µ –¥–ª–∏–Ω—É –≤ –º–µ—Ç—Ä–∞—Ö –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É '+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞–±–µ–ª—å –≤ –û–ö–õ'."
                }
            ] as Step[]
        },
        {
            title: "üîß –†–∞–±–æ—Ç–∞ —Å –û–ö–õ",
            content: "–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ '+ –î–æ–±–∞–≤–∏—Ç—å –û–ö–õ', –∫–∞—Ä—Ç–æ—á–∫–∞ –û–ö–õ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π. –í–Ω–∏–∑—É —Ä–∞–∑–¥–µ–ª–∞ '–ü–æ–¥–±–æ—Ä –∫–∞–±–µ–ª—è –¥–ª—è –û–ö–õ' –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –û–ö–õ –∫–∞–±–µ–ª–µ–º. –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. " +
                "–¢–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –û–ö–õ, –ø—Ä–æ—Å—Ç–æ –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é –≤–∞–º. " +
                "–° –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –û–ö–õ –≤–æ–∑–º–æ–∂–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è: " +
                "\n‚Ä¢ –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –û–ö–õ\n‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –∫–∞–±–µ–ª—å \n‚Ä¢ –£–¥–∞–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞–±–µ–ª–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –û–ö–õ\n‚Ä¢ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ '–ü–æ–¥—Ä–æ–±–Ω–µ–µ' –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –û–ö–õ "
        },
        {
            title: "üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ",
            content: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF' –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –û–ö–õ."
        },
        {
            title: "üí° –°–æ–≤–µ—Ç—ã",
            content: "‚Ä¢ –í –ø—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω–æ–µ –≤–∞–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –û–ö–õ\n‚Ä¢ –í—ã–±–æ—Ä –û–ö–õ –∏–ª–∏ –Ω—É–∂–Ω–æ–π –º–∞—Ä–∫–∏ –∫–∞–±–µ–ª—è –º–æ–∂–Ω–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –ø–æ–ª—è –ø–æ–∏—Å–∫–∞\n‚Ä¢ –ö–∞—Ä—Ç–æ—á–∫–∞ –û–ö–õ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏."
        }
    ];

    return (
        <>
            {/* –ö–Ω–æ–ø–∫–∞ –ø–æ–º–æ—â–∏ */}
            <button
                className={`${styles.helpBtn} ${open ? styles.hidden : ''}`}
                onClick={() => setOpen(true)}
                title="–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é"
            >
                ?
            </button>

            {/* –°–∞–π–¥–±–∞—Ä */}
            <div className={`${styles.sidebar} ${open ? styles.open : ''}`}>
                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
                <div className={styles.header}>
                    <h2 className={styles.title}>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–æ–º –û–ö–õ</h2>
                    <button
                        className={styles.closeBtn}
                        onClick={() => setOpen(false)}
                        title="–ó–∞–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é"
                    >
                        ‚úï
                    </button>
                </div>

                {/* –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º */}
                <nav className={styles.nav}>
                    {sections.map((section, index) => (
                        <button
                            key={index}
                            className={`${styles.navBtn} ${activeSection === index ? styles.active : ''}`}
                            onClick={() => setActiveSection(index)}
                        >
                            {section.title.split(' ')[0]} {/* –ò–∫–æ–Ω–∫–∞ */}
                        </button>
                    ))}
                </nav>

                {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}
                <div className={styles.content}>
                    {/* –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç */}
                    {activeSection === 0 && (
                        <div className={styles.section}>
                            <h3 className={styles.sectionTitle}>{sections[0].title}</h3>
                            <p className={styles.text}>{sections[0].content}</p>
                            <div className={styles.quickActions}>
                                <button
                                    className={styles.actionBtn}
                                    onClick={() => setActiveSection(1)}
                                >
                                    üìã –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
                                </button>
                            </div>
                        </div>
                    )}

                    {/* –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è */}
                    {activeSection === 1 && (
                        <div className={styles.section}>
                            <h3 className={styles.sectionTitle}>{sections[1].title}</h3>
                            <div className={styles.steps}>
                                {sections[1].steps!.map((step, index) => (
                                    <div key={index} className={styles.step}>
                                        <div className={styles.stepHeader}>
                                            <span className={styles.stepNumber}>{index + 1}</span>
                                            <h4 className={styles.stepTitle}>{step.title}</h4>
                                        </div>
                                        <p className={styles.stepDescription}>{step.description}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã */}
                    {[2, 3, 4].includes(activeSection) && (
                        <div className={styles.section}>
                            <h3 className={styles.sectionTitle}>{sections[activeSection].title}</h3>
                            <p className={styles.text}>{sections[activeSection].content}</p>
                        </div>
                    )}
                </div>

                {/* –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */}
                <div className={styles.mobileProgress}>
                    {sections.map((_, index) => (
                        <div
                            key={index}
                            className={`${styles.progressDot} ${activeSection === index ? styles.active : ''}`}
                            onClick={() => setActiveSection(index)}
                        />
                    ))}
                </div>
            </div>

            {/* Overlay */}
            {open && <div className={styles.overlay} onClick={() => setOpen(false)} />}
        </>
    );
};